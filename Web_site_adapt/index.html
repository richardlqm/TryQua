<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <link rel="stylesheet" href="./global.css" />
    <link rel="stylesheet" href="./index.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Roboto Mono:wght@400&display=swap"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
    <script src="/index.js"></script>
  </head>
  <style>
    /* Add a CSS class to define the hover effect */
    .highlight-on-hover:hover {
      /* Change the background color and add a border on hover */
      background-color: yellow; /* Change this to the desired highlight color */
      border: 2px solid red; /* Change this to the desired border style */
      cursor: pointer; /* Change the cursor style to indicate interactivity */
    }
  </style>
  <body>
    <div class="web-1920-11">
      <div class="web-1920-11-child"></div>
      <div class="advertise-text-page-1">
        <div class="advertise-text-page-1-inner">
          <div class="advertise-text-page-1-inner">
            <div class="advertise-text-page-1-inner">
              <div class="experiment-with-the-container">
                <p class="experiment-with-the">
                  Experiment with the QUA emulator here
                </p>
                <p class="select-an-example-modify-it-a">
                  <span class="select-an-example"
                    >Select an example, modify it as you like, and execute it by
                    clicking “Run”. You can also select Your Cod,</span
                  >
                  paste code and run it.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="try-qua">
        <p class="select-an-example-modify-it-a">Try QUA</p>
      </div>
      <div class="hghlight-program-1">
        <div class="d-ramsey-map-wrapper">
          <div class="d-ramsey-map-container">
            <span class="span">2</span>D Ramsey Map
          </div>
        </div>
      </div>
      <main class="copy-page-1-parent">
        <div class="copy-page-1">
          <div class="copy">Copy</div>
          <div class="copy-page-1-inner">
            <div class="path-73352-parent">
              <img
                class="path-73352-icon"
                alt=""
                src="./public/undefined7.png"
              />

              <div class="group-child"></div>
            </div>
          </div>
        </div>
        <div class="zoom-page-1">
          <div class="zoom">Zoom</div>
          <img class="zoom-page-1-child" alt="" src="./public/undefined8.png" />
        </div>
        <div class="share-page-1">
          <div class="share">Share</div>
          <img
            class="share-page-1-child"
            alt=""
            src="./public/undefined9.png"
          />
        </div>
        <section class="move-page-1-parent">
          <div class="move-page-1">Move</div>
          <img class="union-5-icon" alt="" src="./public/undefined10.png" />

          <img class="union-6-icon" alt="" src="./public/undefined11.png" />
        </section>
      </main>
      <div class="web-1920-11-item"></div>
      <div class="txt1">
        <div class="compiler-results">Compiler Results</div>
      </div>
      <img class="component-1-icon" alt="" src="./public/undefined15.png" />

      <img
        class="program-1-page-1-icon"
        alt=""
        src="./public/undefined13.png"
      />

      <div class="def-ramseyt-container">
        <p class="def-ramseyt">
          <span class="def">def </span>
          <span>Ramsey</span>
          <span class="span1">(</span>
          <span class="def">t</span>
          <span class="span1">)</span>
          <span class="def">:</span>
        </p>
      </div>
      <div class="txt2">
        <div class="d-ramsey-map">2D Ramsey map</div>
      </div>
      <div class="component-2">
        <img
          class="compiler-results-area-p-1-icon"
          alt=""
          src="./public/undefined1.png"
        />

        <img
          class="scroll-path-page-1-icon"
          alt=""
          src="./public/undefined5.png"
        />

        <div class="scroll-compil-page-1"></div>
        <div class="compilation-results-can-container">
          <p class="select-an-example-modify-it-a">
            Compilation results can be text - error codes
          </p>
          <p class="select-an-example-modify-it-a">and descriptions</p>
        </div>
      </div>
      <div class="program-3-page-1">
        <div class="program-3-page-1-inner">
          <div class="program-3-page-1-inner">
            <div class="q-randomized-benchmarking-container">
              <span class="span">2</span>Q Randomized Benchmarking
            </div>
          </div>
        </div>
      </div>
      <div class="your-code-page-1" id="yourCodePage1Container">
        <div class="program-3-page-1-inner">
          <div class="program-3-page-1-inner">
            <div class="your-code"><span class="span">Y</span>our Code</div>
          </div>
        </div>
      </div>
      <div class="program-4-page-1">
        <div class="program-3-page-1-inner">
          <div class="your-code"><span class="span">E</span>xperiment 2</div>
        </div>
      </div>
      <div class="program-5-page-1">
        <div class="program-3-page-1-inner">
          <div class="your-code"><span class="span">E</span>xperiment 2</div>
        </div>
      </div>
      <div class="program-2-page-1 highlight-on-hover" id="rtFrequencyTrackingContainer1" contenteditable="true">
        <div class="program-3-page-1-inner">
          <div class="your-code">
            <span class="span">R</span>T frequency Tracking
          </div>
        </div>
      </div>
      <div class="run-button-page-1" id="run">
        <div class="run-button-page-1-child"></div>
        <div class="group-parent">
          <div class="ellipse-parent">
            <div class="group-item"></div>
            <div class="run">Run</div>
          </div>
          <img class="path-73349-icon" alt="" src="./public/undefined2.png" />
        </div>
      </div>
    </div>
  
    <script>
    // DOMContentLoaded event
    document.addEventListener("DOMContentLoaded", main);
          // Importing highlight.js
    // @ts-ignore
    import hljs from "highlight.js/lib/core";
    import python from "highlight.js/lib/languages/python";
    // import pyodide, { loadPyodide } from "pyodide/pyodide.js";

    // Registering the Python language
    hljs.registerLanguage("python", python);

    hljs.configure({
      languages: ["python"],
      cssSelector: "code.language-python",
      ignoreUnescapedHTML: true,
    });

    hljs.highlightAll();

    // Class definition for file loading and handling
    class FileHandler {
      constructor({ files, codeEl, titleEl }) {
        this.codeEl = codeEl;
        this.titleEl = titleEl;
        this.files = files;
      }

      async loadFile({ name, title }) {
        this.titleEl.innerText = title;
        const path = `static/python-examples/${name}`;

        const response = await fetch(path);

        const text = await response.text();
        this.codeEl.textContent = text.trim();
        hljs.highlightBlock(this.codeEl);

        ["input", "change"].forEach((listener) => {
          // @ts-ignore
          this.codeEl.addEventListener(listener, (e) => {
            // Code highlighting logic
          });
        });
      }
    }

    // Class definition for Python evaluation
    class PythonEvaluator {
      constructor({ pyodide, codeEl, resultEl }) {
        this.pyodide = pyodide;
        this.resultEl = resultEl;
        this.codeEl = codeEl;
      }

      async evaluatePython() {
        if (!this.pyodide) {
          console.log("pyodide not ready");
          return;
        }

        this.resultEl.innerText = this.pyodide.runPython(this.codeEl.textContent);
      }

      quaLoader(pckg) {
        return this.pyodide.loadPackage(`static/python-examples/packages/${pckg}`);
      }
    }

    // Setup links
    function setupLinks({ files, filesEl, codeEl, titleEl }) {
      files.forEach(({ name, title }) => {
        let li = document.createElement("li");
        let a = document.createElement("a");
        a.href = "#";
        a.innerText = title;
        a.addEventListener("click", () => {
          let fileHandler = new FileHandler({ titleEl, codeEl, files });
          fileHandler.loadFile({ name, title });
        });

        li.appendChild(a);
        // @ts-ignore
        filesEl.appendChild(li);
      });
    }

    async function main() {
      // @ts-ignore
      let pyodide = await loadPyodide();
      let setupElements = {
        files: [
          { title: "A simple hello world", name: "hello.py" },
          { title: "A complex calculation", name: "calculation.py" },
          { title: "CPMG Example", name: "cpmg.py" },
          { title: "Frame Rotation example", name: "frame_rotation.py" },
          { title: "Phase Coherence example", name: "phase_coherence.py" },
          { title: "Power Rabi example", name: "power_rabi.py" },
        ],
        codeEl: document.querySelector("code.language-python"),
        resultEl: document.getElementById("result"),
        titleEl: document.querySelector("#title"),
        filesEl: document.querySelector("div#file-list"),
        pyodide: pyodide,
      };
      let runButton = document.getElementById("run");
      // @ts-ignore
      if (runButton) {
        runButton.disabled = true; // Or set it to false if needed
      }
      setupLinks(setupElements);

      let pyEval = new PythonEvaluator(setupElements);
      let fileHandler = new FileHandler(setupElements);

      fileHandler.loadFile(setupElements.files[0]);
      pyEval.quaLoader("qua_emulator.whl").then(() => {
        // @ts-ignore
        runButton.disabled = false;
        runButton?.addEventListener("click", () => pyEval.evaluatePython());
      });
    }


     document.addEventListener("DOMContentLoaded", function () {
        var rtFrequencyTrackingElement = document.getElementById("rtFrequencyTrackingContainer1");
        if (rtFrequencyTrackingElement) {
          rtFrequencyTrackingElement.addEventListener("click", function () {
            window.location.href = "./web-1920-3.html";
          });
        }
        var yourCodePage1Container = document.getElementById("yourCodePage1Container");
        if (yourCodePage1Container) {
          yourCodePage1Container.addEventListener("click", function (e) {
            window.location.href = "./web-1920-2.html";
          });
        }
      });
      </script>
  </body>
</html>
